[build]
  # First install --include=dev the dependencies, then run the build command
  command = "ls -al dist && TIMESTAMP=$(date +'%Y%m%d_%H%M%S') && cp -r dist dist/backup_$TIMESTAMP && ls -al dist && npm install --include=dev && npm run build && ls -al dist"
  
  # Directory to publish after build, usually your dist folder
  publish = "dist"
  
  # Environment variables
  [build.environment]
    NODE_ENV = "production"

[context.production]
  # Settings for production deployment
  command = "ls -al dist && TIMESTAMP=$(date +'%Y%m%d_%H%M%S') && cp -r dist dist/backup_$TIMESTAMP && ls -al dist && npm install --include=dev && npm run build && ls -al dist"
  publish = "dist"

[[redirects]]
  from = "/"
  to = "/index.html"
  status = 200
