[build]
  # First install --include=dev the dependencies, then run the build command
  command = "cp -r dist dist_backup && npm install --include=dev && npm run build && cp -r dist_backup/* dist/ && rm -rf dist_backup"
  
  # Directory to publish after build, usually your dist folder
  publish = "dist"
  
  # Environment variables
  [build.environment]
    NODE_ENV = "production"

[context.production]
  # Settings for production deployment
  command = "cp -r dist dist_backup && npm install --include=dev && npm run build && cp -r dist_backup/* dist/ && rm -rf dist_backup"
  publish = "dist"

[[redirects]]
  from = "/"
  to = "/index.html"
  status = 200
